<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Static Widget Route</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .url-input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
        }
        .test-button {
            background: #007AFF;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056CC;
        }
        .instructions {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ðŸ§ª iPad Static Widget Test</h1>
        <p>Test your static widget route for iPad compatibility</p>
        
        <div class="instructions">
            <h3>ðŸ“± How to Test on iPad:</h3>
            <ol>
                <li>Enter your widget slug below</li>
                <li>Click "Test Static Route" to load the static version</li>
                <li>Copy the URL and test in Notion on iPad</li>
                <li>Compare with the dynamic version</li>
            </ol>
        </div>

        <div>
            <label for="slug">Widget Slug:</label>
            <input 
                type="text" 
                id="slug" 
                class="url-input" 
                placeholder="Enter your widget slug (e.g., 'my-widget')"
                value=""
            >
        </div>

        <div>
            <button class="test-button" onclick="testStatic()">Test Static Route</button>
            <button class="test-button" onclick="testDynamic()">Test Dynamic Route</button>
            <button class="test-button" onclick="copyUrl('static')">Copy Static URL</button>
            <button class="test-button" onclick="copyUrl('dynamic')">Copy Dynamic URL</button>
        </div>

        <div>
            <h3>Static Route (iPad Compatible):</h3>
            <input type="text" id="staticUrl" class="url-input" readonly>
            
            <h3>Dynamic Route (Desktop):</h3>
            <input type="text" id="dynamicUrl" class="url-input" readonly>
        </div>

        <div>
            <h3>Preview:</h3>
            <iframe id="preview" class="test-iframe" src="about:blank"></iframe>
        </div>
    </div>

    <script>
        function getBaseUrl() {
            return window.location.origin;
        }

        function updateUrls() {
            const slug = document.getElementById('slug').value;
            const baseUrl = getBaseUrl();
            
            if (slug) {
                document.getElementById('staticUrl').value = `${baseUrl}/w/${slug}/static`;
                document.getElementById('dynamicUrl').value = `${baseUrl}/w/${slug}`;
            } else {
                document.getElementById('staticUrl').value = '';
                document.getElementById('dynamicUrl').value = '';
            }
        }

        function testStatic() {
            const slug = document.getElementById('slug').value;
            if (!slug) {
                alert('Please enter a widget slug');
                return;
            }
            const url = `${getBaseUrl()}/w/${slug}/static`;
            document.getElementById('preview').src = url;
        }

        function testDynamic() {
            const slug = document.getElementById('slug').value;
            if (!slug) {
                alert('Please enter a widget slug');
                return;
            }
            const url = `${getBaseUrl()}/w/${slug}`;
            document.getElementById('preview').src = url;
        }

        function copyUrl(type) {
            const url = type === 'static' ? 
                document.getElementById('staticUrl').value : 
                document.getElementById('dynamicUrl').value;
            
            if (!url) {
                alert('Please enter a widget slug first');
                return;
            }

            navigator.clipboard.writeText(url).then(() => {
                alert(`${type === 'static' ? 'Static' : 'Dynamic'} URL copied to clipboard!`);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert(`${type === 'static' ? 'Static' : 'Dynamic'} URL copied to clipboard!`);
            });
        }

        // Update URLs when slug changes
        document.getElementById('slug').addEventListener('input', updateUrls);
    </script>
</body>
</html>
